let t={class:"xl-e"},e={class:"xl-f"};import l from"../lib/magix.js";import p from"../plugins/app.js";import i from"./ctrl.js";let s=l.toMap(p,"appId");export default l.View.extend({tmpl:(l,p,i,s,r,o)=>{let a,n,h=[],{items:d}=l;for(let l=d.length,s=0;s<l;s+=1){let l=d[s];a=[p(0,l.app.icon,1)],n=[p("div",t,a)],a=[p(0,l.app.title)],n.push(p("div",e,a)),h.push(p("div",{class:"xl-d",style:"left:"+l.left+"px;top:"+l.top+"px","mx5-click":i+"\x1e_8({app:'"+o(r,l.app,"_."+s+".a")+"'})"},n))}return p(i,0,h)},init(){let t=getComputedStyle(document.body),e=parseInt(t.getPropertyValue("--xl-a"),10),p=parseInt(t.getPropertyValue("--xl-b"),10),r=parseInt(t.getPropertyValue("--xl-c"),10),o=parseInt(t.getPropertyValue("--xl-_"));this._3=e,this._4=p,this._5=r,this._6=o;let{params:a}=l.parseUrl(location.href);if(a.open){let t=a.open.split(",");for(let e of t){let t=s[e];t&&i._C(this,t)}}},_7(){let t=this._3,e=this._4,l=this._5,i=this._6,s=document.body.clientHeight-i,r=l,o=l,a=[];for(let i of p){a.push({app:i,left:r,top:o});let p=o+e+l;p+e>=s&&(p=l,r+=t+l),o=p}this.set({items:a})},render(){this._7(),this.digest()},"_8<click>"(t){let{app:e}=t.params;e.url?window.open(e.url):i._C(this,e)},"$win<resize>"(){this.render()}});