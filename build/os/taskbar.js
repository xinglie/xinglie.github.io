import"./device.js";let t,e={class:"xl-H"};import i from"../lib/magix.js";import l from"./exchange.js";import c from"./ctrl.js";let s=(t,e)=>{let i=!1;return t["\0"+e.appId]||(t["\0"+e.appId]=1,t.push(e),i=!0),i};export default i.View.extend({tmpl:(i,l,c,s,p,a,d)=>{let o,r,m,h=[],{list:x,active:_}=i;t?r=[t]:(o=[l(0,'<path fill="#fff" d="M846.483 734.991c41.052 0 74.33-33.281 74.33-74.33V214.684c0-41.052-33.277-74.333-74.33-74.333H177.517c-41.052 0-74.33 33.281-74.33 74.333v445.977c0 41.049 33.277 74.33 74.33 74.33h222.989v74.33H136.974c-18.66 0-33.786 15.126-33.786 33.786v6.757c0 18.66 15.126 33.786 33.786 33.786h750.052c18.66 0 33.786-15.126 33.786-33.786v-6.757c0-18.66-15.126-33.786-33.786-33.786H586.33v-74.33h260.153zm-594.636-74.33c-41.052 0-74.33-33.281-74.33-74.333V289.013c0-41.052 33.277-74.33 74.33-74.33h520.307c41.049 0 74.33 33.277 74.33 74.33v297.315c0 41.052-33.281 74.333-74.33 74.333H251.847zm520.306-322.092c0-27.368-25.882-49.555-57.81-49.555H309.66c-31.928 0-57.814 22.187-57.814 49.555V536.78c0 27.364 25.885 49.552 57.814 49.552h404.684c31.928 0 57.81-22.187 57.81-49.552V338.569z"/>',1)],r=[t=l("svg",{_:"_",class:"xl-F",viewBox:"0 0 1024 1024"},o)]),h.push(l("div",{class:"xl-D xl-E",title:"\u663e\u793a\u684c\u9762","mx5-click":c+"\x1e_a_()"},r));for(let t=x.length,i=0;i<t;i+=1){let t=x[i];o=[l(0,t.icon,1)],r=[l("span",e,o),l(0,t.title)],m="xl-G",t.appId==_&&(m+=" xl-I"),h.push(l("div",{title:t.title,"mx5-click":c+"\x1e_9({id:'"+d(t.appId)+"'})",id:t.appId+"_tb_i",class:m},r))}return h.push(l("div",{"mx5-owner":c,"mx5-from":c,"mx5-view":"~xl/os/device",class:"xl-K"})),l(c,0,h)},init(){let t,e=[],i=(i,l)=>{clearTimeout(t),i&&this.set({active:l}),t=setTimeout((()=>{this.digest({list:e})}),50)};l.on("_M",(t=>{s(e,t)&&i()})),l.on("_N",(t=>{for(let l=e.length;l--;)if(e[l].appId==t.id){e.splice(l,1),delete e["\0"+t.id],i();break}})),l.on("_Q",(t=>{i(!0,t.id)})),l.on("_R",(()=>{i(!0)})),this.set({list:e})},render(){let t=this.get("list"),e=c._y();for(let i of e)s(t,i);this.digest()},"_9<click>"(t){let{id:e}=t.params;c._z(e,!0)},"_a_<click>"(){c._J()}});