let t={class:"xl-R xl-U"};import r from"../../lib/magix.js";import e from"../../os/wallpaper.js";import a from"../../lib/agent.js";import l from"../../lib/cron.js";r.applyStyle("xl-e",".xl-R{background:#0008;border-radius:2px;box-shadow:0 -1px 0 6px #0008;height:62px;opacity:.1;overflow:auto;padding:2px 0;transition:all .5s;width:310px}.xl-R:hover{opacity:1}.xl-S{background-color:#fff3;background-repeat:no-repeat;background-size:cover;cursor:pointer;float:left;height:60px;width:100px}.xl-T{margin-right:5px}.xl-U{-ms-overflow-style:none;scrollbar-width:thin}.xl-U::-webkit-scrollbar{height:0;width:0}.xl-U:hover::-webkit-scrollbar{height:2px}.xl-U::-webkit-scrollbar-corner{height:0;width:0}.xl-U::-webkit-scrollbar-thumb{background:#fff7;border-radius:2px}.xl-U::-webkit-scrollbar-thumb:hover{background:#fff}");let o="http://wallpaper.apc.360.cn/index.php?c=WallPaper&a=getAppsByCategory&cid=9&count=40&from=360chrome&start=";export default r.View.extend({tmpl:(r,e,a,l,o,i,s)=>{let h,c,p,d=[],{list:n}=r;if(n&&n.length){c=[];for(let t=n.length,r=t-1,l=0;l<t;l+=1){let t=n[l],o=l===r,i=t.url.replace("bdr/__85","bdr/200_120_60");h="xl-S",o||(h+=" xl-T"),c.push(e("div",{style:"background-image:url("+i+")","mx5-click":a+"\x1e_ah({thumb:'"+s(i)+"',src:'"+s(t.url)+"'})",class:h}))}p=[e("div",{style:"height:100%;width:"+(105*n.length-5)+"px"},c)],d.push(e("div",t,p))}return e(a,0,d)},assign:()=>!1,async render(){try{let{start:t,last:r,exist:e}=(()=>{let t=Math.floor(400*Math.random()),r=localStorage.getItem("ls#bg.random"),e=0,a=0;if(r){let l=JSON.parse(r);l._ad>Date.now()?(t=l._ae,a=1):e=l._ae}return{exist:a,start:t,last:e}})();a.clear(o+r,!0),e||localStorage.setItem("ls#bg.random",JSON.stringify({_ad:18e5+Date.now(),_ae:t}));let l=await a.request(o+t,36e5,!0),i=JSON.parse(l),s=[];i&&i.data&&(s=i.data),this.digest({list:s}),this._af(s)}catch(t){this.digest()}},_af(t){if(!this._ag){this._ag=1;let r=()=>{let r=Math.floor(Math.random()*t.length),a=t[r].url,l=a.replace("bdr/__85","bdr/200_120_60");e._ac(l,a)};l._s(r,144e5,!0),this.on("destroy",(()=>{l._t(r)}))}},"_ah<click>"(t){let{thumb:r,src:a}=t.params;e._ac(r,a)}});