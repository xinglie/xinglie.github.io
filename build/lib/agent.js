let e=[{_l:"https://api.codetabs.com/v1/proxy?quest=",_m:1},{_l:"https://cors-anywhere.herokuapp.com/",_m:0},{_l:"https://jsonp.afeld.me/?url=",_m:1},{_l:"https://proxy.hackeryou.com/?reqUrl=",_m:1}];export default{request:(t,r,o,a)=>new Promise(((l,i)=>{let s=0,n=async()=>{let c=[t,o,a].join("\0");if(r){let e=localStorage.getItem(c);if(e){let t=JSON.parse(e);if(t.expire>Date.now())return l(t.data)}}if(s<e.length){let i=t;if(o){let r=e[s];i=r._l,r._m?i+=encodeURIComponent(t):i+=t}try{let e=await fetch(i);if(e.ok){let t=await e.blob(),o=await((e,t)=>new Promise(((r,o)=>{let a=new FileReader;a.onload=e=>{r(e.target.result.toString())},a.onerror=o,a.readAsText(e,t||"utf-8")})))(t,a);if(r)try{localStorage.setItem(c,JSON.stringify({data:o,expire:r+Date.now()}))}catch(e){localStorage.clear()}l(o)}else s++,n()}catch(e){s++,n()}}else i("no server to request:"+t)};n()})),clear(e,t,r){let o=[e,t,r].join("\0");localStorage.removeItem(o)}};