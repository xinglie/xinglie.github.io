import e from"../../lib/magix.js";import t from"../mx-dragdrop/index.js";e.applyStyle("xl-b",'[mx5-view*="/mx-slider/index"]{position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.xl-N{background:#fff;border-radius:2px;cursor:pointer;height:4px}.xl-O{border-radius:50%;box-shadow:0 0 0 2px #88cbfb68;cursor:pointer;height:8px;margin-left:-4px;top:-2px;width:8px}.xl-P,.xl-O{background:#88cbfb;position:absolute}.xl-P{top:0}.xl-Q,.xl-P{border-radius:2px;height:4px}.xl-Q{background:#999}');export default e.View.extend({tmpl:(e,t,i)=>{let s,l,{buffer:r,bufferValue:d,value:o}=e;return l=[],r&&l.push(t("div",{class:"xl-Q",style:"width:"+100*d+"%"})),l.push(t("div",{class:"xl-P",style:"width:"+100*o+"%"})),s=[t("div",{class:"xl-N",id:"t_"+i,"mx5-click":i+"\x1e_j()"},l),t("div",{class:"xl-O",style:"left:"+100*o+"%","mx5-mousedown":i+"\x1e_k()"})],t(i,0,s)},assign(e){return!this._i&&(this.set(e),!0)},render(){this.digest()},"_j<click>"(t){let i=t.eventTarget.getBoundingClientRect(),s=(t.pageX-i.left)/i.width;this.digest({value:s}),e.dispatch(this.root,"change",{percent:s})},"_k<mousedown>"(t){let i=e.node("t_"+this.id).getBoundingClientRect(),s=this.get("value")||0;this._i=1,this._d(t,(l=>{let r=(l.pageX-t.pageX)/i.width+s;r>1?r=1:r<0&&(r=0),this.digest({value:r}),e.dispatch(this.root,"update",{percent:r})}),(()=>{e.dispatch(this.root,"change",{percent:this.get("value")}),delete this._i}))}}).merge(t);